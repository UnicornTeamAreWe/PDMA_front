{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\PDMA\\\\code\\\\front\\\\src\\\\component\\\\Alipay_All.js\";\nimport React from 'react';\nimport Plot from 'react-plotly.js';\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { Typography, Divider } from 'antd';\nconst {\n  Title,\n  Paragraph,\n  Text\n} = Typography;\n\nconst getAlipay = async (id, setData) => {\n  axios.post(\"http://3.85.56.92:8088/getAlipay\", qs.stringify({\n    id: id\n  })).then(response => {\n    setData(response.data);\n  }).catch(error => console.log(error));\n};\n\nexport function Alipay_All() {\n  const [Alipay, setAlipay] = React.useState([]);\n  React.useEffect(() => {\n    getAlipay(1, data => setAlipay(data)).catch();\n  }, []);\n  console.log(Alipay);\n  let Net_income = 0;\n  let Income_all = 0;\n  let Spend_all = 0;\n\n  let Calculate = () => {\n    Income_all = 0;\n    Spend_all = 0;\n    Alipay.forEach(item => {\n      if (item.income_spending != null && item.income_spending.indexOf('收入') >= 0) {\n        Income_all += item.amount;\n      } else if (item.income_spending != null && item.income_spending.indexOf('支出') >= 0) {\n        Spend_all += item.amount;\n      }\n    });\n    Income_all = Income_all.toFixed(2);\n    Spend_all = Spend_all.toFixed(2);\n  };\n\n  Calculate();\n  Net_income = Income_all - Spend_all;\n  let Income_Spend_arr = ['收入', '支出'];\n  let Income_Spend_amount = [Income_all, Spend_all]; // let Min_time = Alipay[0].payment_time;\n  // let Max_time = Alipay[(Alipay.length-1)].payment_time;\n  // console.log(Min_time);\n  // console.log(Max_time);\n\n  let data1 = [{\n    x: Income_Spend_arr,\n    y: Income_Spend_amount,\n    type: 'bar'\n  }];\n  let data2 = [{\n    labels: Income_Spend_arr,\n    values: Income_Spend_amount,\n    type: 'pie'\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Plot, {\n    data: data1,\n    layout: {\n      width: 600,\n      height: 400,\n      title: 'Alipay Info'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Plot, {\n    data: data2,\n    layout: {\n      width: 600,\n      height: 400,\n      title: 'Alipay Info'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, \"\\u5206\\u6790\\u62A5\\u544A\"), /*#__PURE__*/React.createElement(Paragraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, \"\\u7531\\u56FE\\u4E2D\\u5185\\u5BB9\\u53EF\\u77E5\\uFF0C\\u652F\\u4ED8\\u5B9D\\u5171\\u6536\\u5165\", Income_all, \"\\u5143, \\u652F\\u51FA\", Spend_all, \"\\u5143, \\u51C0\\u6536\\u5165\", Net_income, \"\\u5143\\u3002\")));\n}","map":{"version":3,"sources":["C:/Users/Dell/PDMA/code/front/src/component/Alipay_All.js"],"names":["React","Plot","axios","qs","Typography","Divider","Title","Paragraph","Text","getAlipay","id","setData","post","stringify","then","response","data","catch","error","console","log","Alipay_All","Alipay","setAlipay","useState","useEffect","Net_income","Income_all","Spend_all","Calculate","forEach","item","income_spending","indexOf","amount","toFixed","Income_Spend_arr","Income_Spend_amount","data1","x","y","type","data2","labels","values","width","height","title"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Plot from 'react-plotly.js';\r\nimport axios from \"axios\";\r\nimport qs from \"qs\";\r\nimport { Typography, Divider } from 'antd';\r\n\r\nconst { Title, Paragraph, Text } = Typography;\r\n\r\nconst getAlipay = async (id,setData)=>{\r\n    axios.post(\"http://3.85.56.92:8088/getAlipay\", qs.stringify({ id: id }))\r\n        .then(response =>{\r\n            setData(response.data)\r\n        })\r\n        .catch(error=>console.log(error));\r\n};\r\n\r\nexport function Alipay_All() {\r\n    const [Alipay, setAlipay] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        getAlipay(1,(data)=>setAlipay(data)).catch()\r\n    },[]);\r\n\r\n    console.log(Alipay);\r\n    let Net_income = 0;\r\n\r\n    let Income_all = 0;\r\n    let Spend_all = 0;\r\n    let Calculate = () => {\r\n        Income_all = 0;\r\n        Spend_all = 0;\r\n        Alipay.forEach(item =>{\r\n            if (item.income_spending != null && item.income_spending.indexOf('收入') >= 0){\r\n                Income_all += item.amount;\r\n            }\r\n            else if (item.income_spending != null && item.income_spending.indexOf('支出') >= 0){\r\n                Spend_all += item.amount;\r\n            }\r\n        })\r\n        Income_all = Income_all.toFixed(2);\r\n        Spend_all = Spend_all.toFixed(2);\r\n    }\r\n\r\n    Calculate();\r\n    Net_income = Income_all - Spend_all;\r\n    let Income_Spend_arr = ['收入','支出'];\r\n    let Income_Spend_amount = [Income_all,Spend_all];\r\n\r\n    // let Min_time = Alipay[0].payment_time;\r\n    // let Max_time = Alipay[(Alipay.length-1)].payment_time;\r\n    // console.log(Min_time);\r\n    // console.log(Max_time);\r\n\r\n    let data1 = [\r\n        {\r\n            x: Income_Spend_arr,\r\n            y: Income_Spend_amount,\r\n            type: 'bar'\r\n        }\r\n    ];\r\n\r\n    let data2 = [\r\n        {\r\n            labels: Income_Spend_arr,\r\n            values: Income_Spend_amount,\r\n            type: 'pie'\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <Plot\r\n                data={data1}\r\n                layout={ {width: 600, height: 400, title: 'Alipay Info'} }\r\n            />\r\n            <Plot\r\n                data={data2}\r\n                layout={ {width: 600, height: 400, title: 'Alipay Info'} }\r\n            />\r\n            <Typography>\r\n                <Title>分析报告</Title>\r\n                <Paragraph>\r\n                    由图中内容可知，支付宝共收入{Income_all}元, 支出{Spend_all}元, 净收入{Net_income}元。\r\n                </Paragraph>\r\n            </Typography>\r\n        </div>);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}