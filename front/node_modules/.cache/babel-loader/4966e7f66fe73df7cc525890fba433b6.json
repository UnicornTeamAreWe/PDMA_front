{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\PDMA\\\\code\\\\front\\\\src\\\\component\\\\Tongcheng.js\";\nimport React from 'react';\nimport Plot from 'react-plotly.js';\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { Typography, Divider } from 'antd';\nconst {\n  Title,\n  Paragraph,\n  Text\n} = Typography;\n\nconst getTongcheng = async (id, setData) => {\n  axios.post(\"http://3.85.56.92:8088/getTongcheng\", qs.stringify({\n    id: id\n  })).then(response => {\n    setData(response.data);\n  }).catch(error => console.log(error));\n};\n\nexport function Tongcheng() {\n  const [Tongcheng, setTongcheng] = React.useState([]);\n  React.useEffect(() => {\n    getTongcheng(1, data => setTongcheng(data)).catch();\n  }, []);\n  console.log(Tongcheng);\n  let Price = 0;\n\n  let Price_sum = () => {\n    Price = 0;\n    Tongcheng.forEach(item => {\n      if (item.state === '出票成功') {\n        Price += item.price;\n      }\n    });\n  };\n\n  let title_info = [];\n  let title_sum = [];\n\n  let Title_Sum = () => {\n    Tongcheng.forEach(item => {\n      if (item.state === '出票成功') {\n        let position;\n\n        if (title_info.length === 0) {\n          title_info.push(item.title);\n          title_sum.push(1);\n        } else {\n          for (position = 0; position < title_info.length; ++position) {\n            if (title_info[position] === item.title) {\n              title_sum[position]++;\n              break;\n            } else if (position === title_info.length - 1) {\n              title_info.push(item.title);\n              title_sum.push(1);\n              break;\n            }\n          }\n        }\n      }\n    });\n  };\n\n  Title_Sum();\n  Price_sum();\n  let str = \"\";\n  let i = 0;\n\n  let Str = () => {\n    i = 0;\n    title_info.forEach(item => {\n      str += item + \"的票\" + title_sum[i] + \"张，\";\n    });\n  };\n\n  Str();\n  let data1 = [{\n    x: title_info,\n    y: title_sum,\n    type: 'bar'\n  }];\n  let data2 = [{\n    labels: title_info,\n    values: title_sum,\n    type: 'pie'\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Plot, {\n    data: data1,\n    layout: {\n      width: 600,\n      height: 400,\n      title: 'Tongcheng Title Info'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Plot, {\n    data: data2,\n    layout: {\n      width: 600,\n      height: 400,\n      title: 'Tongcheng Title Info'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, \"\\u5206\\u6790\\u62A5\\u544A\"), /*#__PURE__*/React.createElement(Paragraph, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, \"\\u7531\\u56FE\\u4E2D\\u5185\\u5BB9\\u53EF\\u77E5\\uFF0C\\u60A8\\u66FE\\u5728\\u540C\\u57CE\\u827A\\u9F99\\u4E0A\\u8D2D\\u4E70\\u8FC7\", str, \" \\u5171\\u6D88\\u8D39\", Price, \"\\u5143\\u3002\")));\n}","map":{"version":3,"sources":["C:/Users/Dell/PDMA/code/front/src/component/Tongcheng.js"],"names":["React","Plot","axios","qs","Typography","Divider","Title","Paragraph","Text","getTongcheng","id","setData","post","stringify","then","response","data","catch","error","console","log","Tongcheng","setTongcheng","useState","useEffect","Price","Price_sum","forEach","item","state","price","title_info","title_sum","Title_Sum","position","length","push","title","str","i","Str","data1","x","y","type","data2","labels","values","width","height"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Plot from 'react-plotly.js';\r\nimport axios from \"axios\";\r\nimport qs from \"qs\";\r\nimport { Typography, Divider } from 'antd';\r\n\r\nconst { Title, Paragraph, Text } = Typography;\r\n\r\nconst getTongcheng = async (id,setData)=>{\r\n    axios.post(\"http://3.85.56.92:8088/getTongcheng\", qs.stringify({ id: id }))\r\n        .then(response =>{\r\n            setData(response.data)\r\n        })\r\n        .catch(error=>console.log(error));\r\n};\r\n\r\n\r\nexport function Tongcheng() {\r\n    const [Tongcheng, setTongcheng] = React.useState([]);\r\n\r\n    React.useEffect(() => {\r\n        getTongcheng(1,(data)=>setTongcheng(data)).catch()\r\n    },[]);\r\n\r\n    console.log(Tongcheng);\r\n\r\n    let Price = 0;\r\n    let Price_sum = () =>{\r\n        Price = 0;\r\n        Tongcheng.forEach(item =>{\r\n            if (item.state === '出票成功'){\r\n                Price += item.price;\r\n            }\r\n        })\r\n    }\r\n\r\n    let title_info = [];\r\n    let title_sum = [];\r\n    let Title_Sum = () =>{\r\n        Tongcheng.forEach(item =>{\r\n            if (item.state === '出票成功'){\r\n                let position;\r\n                if (title_info.length === 0){\r\n                    title_info.push(item.title);\r\n                    title_sum.push(1);\r\n                }\r\n                else{\r\n                    for (position = 0; position < title_info.length; ++position){\r\n                        if (title_info[position] === item.title){\r\n                            title_sum[position]++;\r\n                            break;\r\n                        }\r\n                        else if (position === title_info.length-1){\r\n                            title_info.push(item.title);\r\n                            title_sum.push(1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    Title_Sum();\r\n    Price_sum();\r\n\r\n    let str = \"\";\r\n    let i = 0;\r\n    let Str = () => {\r\n        i = 0;\r\n        title_info.forEach(item => {\r\n            str += item + \"的票\" + title_sum[i] + \"张，\";\r\n        })\r\n    }\r\n    Str();\r\n\r\n\r\n    let data1 = [\r\n        {\r\n            x: title_info,\r\n            y: title_sum,\r\n            type: 'bar'\r\n        }\r\n    ];\r\n\r\n    let data2 = [\r\n        {\r\n            labels: title_info,\r\n            values: title_sum,\r\n            type: 'pie'\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <Plot\r\n                data={data1}\r\n                layout={ {width: 600, height: 400, title: 'Tongcheng Title Info'} }\r\n            />\r\n            <Plot\r\n                data={data2}\r\n                layout={ {width: 600, height: 400, title: 'Tongcheng Title Info'} }\r\n            />\r\n            <Typography>\r\n                <Title>分析报告</Title>\r\n                <Paragraph>\r\n                    由图中内容可知，您曾在同城艺龙上购买过{str} 共消费{Price}元。\r\n                </Paragraph>\r\n            </Typography>\r\n        </div>);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}